<!DOCTYPE html>
<!-- ********* dit_layout.html v2 dlintec*********** -->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js" lang="{{=T.accepted_language or 'en'}}"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <!-- www.phpied.com/conditional-comments-block-downloads/ -->
    <!-- Always force latest IE rendering engine
         (even in intranet) & Chrome Frame
         Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge{{=not request.is_local and ',chrome=1' or ''}}">
    <!--  Mobile Viewport Fix
          j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag
          device-width: Occupy full width of the screen in its current orientation
          initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
          user-scalable = yes allows the user to zoom in -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>{{=response.title or request.application}}</title>
    <!-- http://dev.w3.org/html5/markup/meta.name.html 
    <meta name="application-name" content="{{=request.application}}">-->
	<meta name="application-name" content="dlintec - Digital Inteligence">
    <!-- Speaking of Google, don't forget to set your site up:
         http://google.com/webmasters -->
    <meta name="google-site-verification" content="">
    <!-- include stylesheets -->
    <!--
    <link rel="stylesheet" href="{{=URL('static','css/bootstrap_essentials.css')}}"/>
    <link rel="stylesheet" href="{{=URL('static','css/bootstrap-responsive.min.css')}}"/>
    -->
    <link rel="stylesheet" href="{{=URL('static','css/bootstrap.min.css')}}"/>
    <link rel="stylesheet" href="{{=URL('static','css/bootstrap-theme.min.css')}}"/>
    <link rel="stylesheet" href="{{=URL('static','css/web2py-bootstrap3.css')}}"/>


    <link rel="shortcut icon" href="{{=URL('static','favicon.ico')}}" type="image/x-icon">
    <link rel="apple-touch-icon" href="{{=URL('static','favicon.png')}}">
    <!-- All JavaScript at the bottom, except for Modernizr which enables
         HTML5 elements & feature detects -->
    <script src="{{=URL('static','js/modernizr-2.8.3.min.js')}}"></script>
    <script src="{{=URL('static','dit/mobile-detect/mobile-detect.min.js')}}"></script>
    <!--[if lt IE 9]>
        <script src="{{=URL('static','js/respond-1.4.2.min.js')}}"></script>
        <![endif]-->
    <!-- Favicons -->
    {{if not response.iconURL:
        response.iconURL='dit/img/icono.png'
      pass
    }}
    {{include 'web2py_ajax.html'}} <!-- this includes jquery.js, calendar.js/.css and web2py.js -->
	  <script>
		md = new MobileDetect(window.navigator.userAgent);
		mobile_detect={};
		mobile_detect.mobile= md.mobile();
		mobile_detect.phone=md.phone();
		mobile_detect.tablet=md.tablet();
		mobile_detect.userAgent=md.userAgent();
		mobile_detect.os=md.os();
		mobile_detect.isIphone=md.is('iPhone');
		mobile_detect.isBot=md.is('bot');
		console.log('movil:', md.mobile() );          // 'Sony'
		console.log('phone:',md.phone() );           // 'Sony'
		console.log('tablet:', md.tablet() );          // null
		console.log('useragent:', md.userAgent() );       // 'Safari'
		console.log('os:', md.os() );              // 'AndroidOS'
		console.log('iphone:', md.is('iPhone') );      // false
		console.log('bot:', md.is('bot') );         // false
		console.log('webkit:', md.version('Webkit') );         // 534.3
		console.log('version:', md.versionStr('Build') );       // '4.1.A.0.562'
		console.log('play o xbox:', md.match('playstation|xbox') ); // false
	  </script>
    <!--
    -->
    {{if not response.no_cssmenu:}}
	<!-- ********** menucss ***********---->
    <link rel="stylesheet" href="{{=URL('static','dit/cssmenu/styles.css')}}">
	<script src="{{=URL('static','dit/cssmenu/script.js')}}"></script>
	<!-- ********** menucss ***********---->
    {{pass}}
	 {{block head}}{{end}}
    {{
    # using sidebars need to know what sidebar you want to use
    mc0 = 'col-md-12'
    mc1 = 'col-md-9'
    mc2 = 'col-md-6'
    left_sidebar_enabled = globals().get('left_sidebar_enabled', False)
    right_sidebar_enabled = globals().get('right_sidebar_enabled', False)
    middle_column = {0: mc0, 1: mc1, 2: mc2}[
    (left_sidebar_enabled and 1 or 0)+(right_sidebar_enabled and 1 or 0)]
    }}
    <!-- Masthead ===================================== -->    
    {{block header}}
    {{end}}
	<link href="{{=URL('static','dit/css/dit_3d.css')}}" rel="stylesheet">
	<link href="{{=URL('static','dit/css/dit_custom.css')}}" rel="stylesheet">
</head>
<body>

    <!--[if lt IE 8]><p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p><![endif]-->
    <div class="flash alert alert-dismissable">{{=response.flash or ''}}</div>
    <!-- Navbar ======================================= -->
	    {{response.menu_height=0}}
		{{if not response.no_menu:}}
    
		<nav class="navbar navbar-inverse " role="navigation">
		  <div class="container-fluid">
			<div class="navbar-header">
			  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			  </button>
			  {{=response.logo or ''}}
			</div>
			<div class="collapse navbar-collapse navbar-ex1-collapse">
			  <ul class="nav navbar-nav navbar-right">
				{{='auth' in globals() and auth.navbar('Welcome',mode='dropdown') or ''}}
			  </ul>
              <!-- -->
			  {{if response.menu:}}
			  {{=MENU(response.menu, _class='nav navbar-nav',li_class='dropdown',ul_class='dropdown-menu')}}
			  {{pass}}
              
			</div>
		  </div>
		</nav>
		{{response.menu_height=51}}
		{{pass}}
    <!-- Main ========================================= -->
    <!-- Begin page content -->
    <div class="container-fluid">
      {{if left_sidebar_enabled:}}
        <div class="col-md-3 left-sidebar">
            {{block left_sidebar}}
            <h3>Left Sidebar</h3>
            <p></p>
            {{end}}
        </div>
      {{pass}}			
      {{if not response.no_cssmenu:}}
		<button id="dit_logo"><img id="logo_png" src="{{=URL('static','dit/img/logo.png')}}" ></button>
      {{pass}}
		<div id="dit_contenido" >
        {{block center}}
        {{include}}
        {{end}}
		</div>

      <div class="{{=middle_column}}">
      </div>

      {{if right_sidebar_enabled:}}
        <div class="col-md-3">
            {{block right_sidebar}}
            <h3>Right Sidebar</h3>
            <p></p>
            {{end}}
        </div>
      {{pass}}
    </div>
    {{if not response.no_cssmenu:}}
	<div id="menuprincipal">
		
			<div id='cssmenu' class="scrollable-menu" role="menu">
				<ul>
					{{menuAuth=auth.navbar(mode='bare')}}
					<li class='has-sub'>
						{{if not menuAuth['user']:}}
							<a href='#'><i class="icon icon-off glyphicon glyphicon-off"></i><span> {{=T('Login')}}</span></a>
						{{else:}}
							<a href='#'><i class="icon icon-user glyphicon glyphicon-user"></i><span> {{=T('User')}}</span></a>
						{{pass}}
						<ul>
							{{for indElem in menuAuth:}}{{elem=menuAuth[indElem]}}
								{{if indElem=='login':}}<li class='last'><a href='{{=elem}}'><i class="icon icon-off glyphicon glyphicon-off"></i><span> {{=T('Login')}}</span></a></li>{{pass}}
								{{if indElem=='register':}}<li class='last'><a href='{{=elem}}'><i class="icon icon-user glyphicon glyphicon-user"></i><span> {{=T('Register')}}</span></a></li>{{pass}}
								{{if indElem=='request_reset_password':}}<li class='last'><a href='{{=elem}}'><i class="icon icon-lock glyphicon glyphicon-lock"></i><span> {{=T('Change Password')}}</span></a></li>{{pass}}
								{{if indElem=='change_password':}}<li class='last'><a href='{{=elem}}'><i class="icon icon-lock glyphicon glyphicon-lock"></i><span> {{=T('Change Password')}}</span></a></li>{{pass}}
								{{if indElem=='logout':}}<li class='last'><a href='{{=elem}}'><i class="icon icon-off glyphicon glyphicon-off"></i><span> {{=T('Logout')}}</span></a></li>
{{pass}}
								{{if indElem=='profile':}}<li class='last'><a href='{{=elem}}'><i class="icon icon-user glyphicon glyphicon-user"></i><span> {{=T('Profile')}}</span></a></li>{{pass}}
							{{pass}}
						</ul>
					</li>
					<!--li class='last'><a href='#' id="alternarPanelHTML"><span> {{=T('Alternar HTML')}}</span></a></li-->
					<!--li class='last'><a href='#' id="generar3d"><span> {{=T('Generar 3d')}}</span></a></li-->
					{{for elemMenu in response.menu:}}
						{{if  elemMenu[2]=='#':}}
						<li class='has-sub'>
						{{else:}}
						<li >
						{{pass}}
						<a href='{{=elemMenu[2]}}'><span>{{=elemMenu[0]}}</span></a>
						{{if len(elemMenu)==4:}}
							<ul>
							{{for subElemMenu in elemMenu[3]:}}
								{{if len(subElemMenu)>=2:}}
									   <li class='last'><a href='{{=subElemMenu[2]}}'><span>{{=subElemMenu[0]}}</span></a></li>
								{{pass}}
							{{pass}}
							</ul>
						{{pass}}
						</li>
					{{pass}}

					<!--
				   <li><a href='#'><span>Home</span></a></li>
				   <li class='active has-sub'><a href='#'><span>Products</span></a>
					  <ul>
						 <li class='has-sub'><a href='#'><span>Product 1</span></a>
							<ul>
							   <li><a href='#'><span>Sub Product</span></a></li>
							   <li class='last'><a href='#'><span>Sub Product</span></a></li>
							</ul>
						 </li>
						 <li class='has-sub'><a href='#'><span>Product 2</span></a>
							<ul>
							   <li><a href='#'><span>Sub Product</span></a></li>
							   <li class='last'><a href='#'><span>Sub Product</span></a></li>
							</ul>
						 </li>
					  </ul>
				   </li>
				   <li><a href='#'><span>About</span></a></li>
				   <li class='last'><a href='#'><span>Contact</span></a></li>
					-->
				</ul>
				<p id="dit_pad">Nav</p>
				<!--p>
					<button id="enableDebug">{{=T('3d status')}}</button>
				</p>
				<p>
					<button id="fullscreen">{{=T('Fullscreen')}}</button>
				</p-->

			</div>
		
	</div>
    {{pass}}
    {{block footer}} <!-- this is default footer -->      
	<!-- 
	  <footer class="footer">
      <div class="container-fluid">
        <div class="copyright pull-left">{{=T('Copyright')}} &#169; {{=request.now.year}}</div>
          <div id="poweredBy" class="pull-right">
            {{=T('Powered by')}}
            <a href="http://www.web2py.com/">web2py</a>
          </div>
      </div>
    </footer>
	-->
    {{end}}
    <!-- The javascript =============================== -->
    <script src="{{=URL('static','js/bootstrap.min.js')}}"></script>
    <script src="{{=URL('static','js/web2py-bootstrap3.js')}}"></script>
    <!-- echart -->
    {{if not response.no_echarts:}}
    <script src="{{=URL('static','dit/echarts225/config.js')}}"></script>
    <script src="{{=URL('static','dit/echarts225/echarts-all.js')}}"></script>
    <script src="{{=URL('static','dit/echarts225/themes/blue.js')}}"></script>
    {{pass}}
	<script>
		var menuprincipalCerrado = true;
		var menuprincipal;
		var dit_logo;
		var dit_menu;
		var dit_contenido;
		var dit_lista_graficas= [];
		var dit_lista_ajustar= [];
		function dit_registrar_echart( pechart){
			dit_lista_graficas.push(pechart);
		}
		function dit_registrar_ajustar(pfun){
			dit_lista_ajustar.push(pfun);
		}
        function GetOffset (object, offset) {
            if (!object)
                return;
            offset.x += object.offsetLeft;
            offset.y += object.offsetTop;

            GetOffset (object.offsetParent, offset);
        }

        function GetScrolled (object, scrolled) {
            if (!object)
                return;
            scrolled.x += object.scrollLeft;
            scrolled.y += object.scrollTop;

            if (object.tagName.toLowerCase () != "html") {
                GetScrolled (object.parentNode, scrolled);
            }
        }

            // always return 1, except at non-default zoom levels in IE before version 8
        function GetZoomFactor () {
            var factor = 1;
            if (document.body.getBoundingClientRect) {
                    // rect is only in physical pixel size in IE before version 8 
                var rect = document.body.getBoundingClientRect ();
                var physicalW = rect.right - rect.left;
                var logicalW = document.body.offsetWidth;

                    // the zoom level is always an integer percent value
                factor = Math.round ((physicalW / logicalW) * 100) / 100;
            }
            return factor;
        }

        function GetBox (iddiv) {
            var div = iddiv;

            if (div.getBoundingClientRect) {        // Internet Explorer, Firefox 3+, Google Chrome, Opera 9.5+, Safari 4+
                var rect = div.getBoundingClientRect ();
                x = rect.left;
                y = rect.top;
                w = rect.right - rect.left;
                h = rect.bottom - rect.top;

                if (navigator.appName.toLowerCase () == "microsoft internet explorer") {
                    // the bounding rectangle include the top and left borders of the client area
                    x -= document.documentElement.clientLeft;
                    y -= document.documentElement.clientTop;

                    var zoomFactor = GetZoomFactor ();
                    if (zoomFactor != 1) {  // IE 7 at non-default zoom level
                        x = Math.round (x / zoomFactor);
                        y = Math.round (y / zoomFactor);
                        w = Math.round (w / zoomFactor);
                        h = Math.round (h / zoomFactor);
                    }
                }
            }
            else {
                    // older Firefox, Opera and Safari versions
                var offset = {x : 0, y : 0};
                GetOffset (div, offset);

                var scrolled = {x : 0, y : 0};
                GetScrolled (div.parentNode, scrolled);

                x = offset.x - scrolled.x;
                y = offset.y - scrolled.y;
                w = div.offsetWidth;
                h = div.offsetHeight;
            }

            return {x: x ,y: y, w: w ,h: h};
        }        
        
        document.addEventListener("DOMContentLoaded", function () {
			dit_contenido= document.getElementById("dit_contenido");
			menuprincipal = document.getElementById("menuprincipal");
			dit_logo = document.getElementById("dit_logo");
			dit_menu=document.getElementById("cssmenu");
			function ajustarPagina(){
			{{if not response.no_cssmenu:}}
				var menuprincipalStyle = menuprincipal.style;
				menuprincipalStyle.position = "absolute";
				menuprincipalStyle.top = "52px";
			   // menuprincipalStyle.height= Math.max((Math.min((window.innerHeight-55),dit_menu.style.height)),55)+"px";
            {{pass}}

                var dit_contenidoStyle = dit_contenido.style;
				dit_contenidoStyle.height = (window.innerHeight-57)+"px";
                dit_contenidoStyle.top="0px";
				//menuprincipalStyle.height= (window.innerHeight-57)+"px";
				console.log('Ajustando Pagina-',window.innerHeight);
                if(dit_lista_graficas.length>0){
                    for (ind in dit_lista_graficas) {
                        var elemGraf=dit_lista_graficas[ind];
                        console.log("ajustando grafica:",elemGraf);
                        elemGraf.resize();
                    }
                }
                if(dit_lista_ajustar.length>0){
                    for (ind in dit_lista_ajustar) {
                        var elemFun=dit_lista_ajustar[ind];
                        console.log("ajustando funcion:",elemFun);
                        elemFun();
                    }
                }
			}
			{{if not response.no_cssmenu:}}

            function cerrarMenuPrincipal() {
					menuprincipalCerrado = true;
					menuprincipal.style.webkitTransform = "translateX(-270px)";
					menuprincipal.style.transform = "translateX(-270px)";

			}
			function abrirMenuPrincipal(){
					ajustarPagina();
					menuprincipalCerrado = false;
					menuprincipal.style.webkitTransform = "translateX(0px)";
					menuprincipal.style.transform = "translateX(0px)";
			}
			function alternaMenuPrincipal() {
				if (menuprincipalCerrado) {
					abrirMenuPrincipal();
				} else {
					cerrarMenuPrincipal();
				}
			}	
 			dit_logo.addEventListener("click", function () {
				alternaMenuPrincipal();
			});			
           {{pass}}
			window.addEventListener("deviceorientation", ajustarPagina);
			window.addEventListener("resize", ajustarPagina);
			ajustarPagina();
			console.log('dit_layout y contenido cargado');
		}, false);

	</script>  
    {{block page_js}}
    {{end page_js}}
    {{if response.google_analytics_id:}}
    <!-- Analytics ==================================== -->
    <script src="{{=URL('static','js/analytics.min.js')}}"></script>
    <script type="text/javascript">
      analytics.initialize({
      'Google Analytics':{trackingId:'{{=response.google_analytics_id}}'}
      });
    </script>
    {{pass}}
</body>
</html>
